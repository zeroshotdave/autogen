"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3922],{54173:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>i,contentTitle:()=>r,default:()=>h,frontMatter:()=>d,metadata:()=>a,toc:()=>l});var c=o(85893),t=o(11151);const d={sidebar_label:"local_commandline_code_executor",title:"coding.local_commandline_code_executor"},r=void 0,a={id:"reference/coding/local_commandline_code_executor",title:"coding.local_commandline_code_executor",description:"CommandLineCodeResult",source:"@site/docs/reference/coding/local_commandline_code_executor.md",sourceDirName:"reference/coding",slug:"/reference/coding/local_commandline_code_executor",permalink:"/autogen/docs/reference/coding/local_commandline_code_executor",draft:!1,unlisted:!1,editUrl:"https://github.com/microsoft/autogen/edit/main/website/docs/reference/coding/local_commandline_code_executor.md",tags:[],version:"current",frontMatter:{sidebar_label:"local_commandline_code_executor",title:"coding.local_commandline_code_executor"},sidebar:"referenceSideBar",previous:{title:"factory",permalink:"/autogen/docs/reference/coding/factory"},next:{title:"markdown_code_extractor",permalink:"/autogen/docs/reference/coding/markdown_code_extractor"}},i={},l=[{value:"CommandLineCodeResult",id:"commandlinecoderesult",level:2},{value:"LocalCommandLineCodeExecutor",id:"localcommandlinecodeexecutor",level:2},{value:"__init__",id:"__init__",level:3},{value:"UserCapability",id:"usercapability",level:2},{value:"add_to_agent",id:"add_to_agent",level:3},{value:"user_capability",id:"user_capability",level:3},{value:"timeout",id:"timeout",level:3},{value:"work_dir",id:"work_dir",level:3},{value:"code_extractor",id:"code_extractor",level:3},{value:"sanitize_command",id:"sanitize_command",level:3},{value:"execute_code_blocks",id:"execute_code_blocks",level:3},{value:"restart",id:"restart",level:3},{value:"LocalCommandlineCodeExecutor",id:"localcommandlinecodeexecutor-1",level:2},{value:"CommandlineCodeResult",id:"commandlinecoderesult-1",level:2}];function s(e){const n={code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h2,{id:"commandlinecoderesult",children:"CommandLineCodeResult"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"class CommandLineCodeResult(CodeResult)\n"})}),"\n",(0,c.jsx)(n.p,{children:"(Experimental) A code result class for command line code executor."}),"\n",(0,c.jsx)(n.h2,{id:"localcommandlinecodeexecutor",children:"LocalCommandLineCodeExecutor"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"class LocalCommandLineCodeExecutor(CodeExecutor)\n"})}),"\n",(0,c.jsx)(n.h3,{id:"__init__",children:"__init__"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:'def __init__(timeout: int = 60,\n             work_dir: Union[Path, str] = Path("."),\n             system_message_update: str = DEFAULT_SYSTEM_MESSAGE_UPDATE)\n'})}),"\n",(0,c.jsx)(n.p,{children:"(Experimental) A code executor class that executes code through a local command line\nenvironment."}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"This will execute LLM generated code on the local machine."})}),"\n",(0,c.jsx)(n.p,{children:'Each code block is saved as a file and executed in a separate process in\nthe working directory, and a unique file is generated and saved in the\nworking directory for each code block.\nThe code blocks are executed in the order they are received.\nCommand line code is sanitized using regular expression match against a list of dangerous commands in order to prevent self-destructive\ncommands from being executed which may potentially affect the users environment.\nCurrently the only supported languages is Python and shell scripts.\nFor Python code, use the language "python" for the code block.\nFor shell scripts, use the language "bash", "shell", or "sh" for the code\nblock.'}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Arguments"}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"timeout"})," ",(0,c.jsx)(n.em,{children:"int"})," - The timeout for code execution. Default is 60."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"work_dir"})," ",(0,c.jsx)(n.em,{children:"str"}),' - The working directory for the code execution. If None,\na default working directory will be used. The default working\ndirectory is the current directory ".".']}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"system_message_update"})," ",(0,c.jsx)(n.em,{children:"str"})," - The system message update for agent that\nproduces code to run on this executor.\nDefault is ",(0,c.jsx)(n.code,{children:"LocalCommandLineCodeExecutor.DEFAULT_SYSTEM_MESSAGE_UPDATE"}),"."]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"usercapability",children:"UserCapability"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"class UserCapability()\n"})}),"\n",(0,c.jsxs)(n.p,{children:["An AgentCapability class that gives agent ability use a command line\ncode executor via a system message update. This capability can be added\nto an agent using the ",(0,c.jsx)(n.code,{children:"add_to_agent"})," method."]}),"\n",(0,c.jsx)(n.h3,{id:"add_to_agent",children:"add_to_agent"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"def add_to_agent(agent: LLMAgent) -> None\n"})}),"\n",(0,c.jsx)(n.p,{children:"Add this capability to an agent by updating the agent's system\nmessage."}),"\n",(0,c.jsx)(n.h3,{id:"user_capability",children:"user_capability"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:'@property\ndef user_capability() -> "LocalCommandLineCodeExecutor.UserCapability"\n'})}),"\n",(0,c.jsx)(n.p,{children:"Export a user capability for this executor that can be added to\nan agent that produces code to be executed by this executor."}),"\n",(0,c.jsx)(n.h3,{id:"timeout",children:"timeout"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"@property\ndef timeout() -> int\n"})}),"\n",(0,c.jsx)(n.p,{children:"(Experimental) The timeout for code execution."}),"\n",(0,c.jsx)(n.h3,{id:"work_dir",children:"work_dir"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"@property\ndef work_dir() -> Path\n"})}),"\n",(0,c.jsx)(n.p,{children:"(Experimental) The working directory for the code execution."}),"\n",(0,c.jsx)(n.h3,{id:"code_extractor",children:"code_extractor"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"@property\ndef code_extractor() -> CodeExtractor\n"})}),"\n",(0,c.jsx)(n.p,{children:"(Experimental) Export a code extractor that can be used by an agent."}),"\n",(0,c.jsx)(n.h3,{id:"sanitize_command",children:"sanitize_command"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"@staticmethod\ndef sanitize_command(lang: str, code: str) -> None\n"})}),"\n",(0,c.jsx)(n.p,{children:"Sanitize the code block to prevent dangerous commands.\nThis approach acknowledges that while Docker or similar\ncontainerization/sandboxing technologies provide a robust layer of security,\nnot all users may have Docker installed or may choose not to use it.\nTherefore, having a baseline level of protection helps mitigate risks for users who,\neither out of choice or necessity, run code outside of a sandboxed environment."}),"\n",(0,c.jsx)(n.h3,{id:"execute_code_blocks",children:"execute_code_blocks"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"def execute_code_blocks(code_blocks: List[CodeBlock]) -> CommandLineCodeResult\n"})}),"\n",(0,c.jsx)(n.p,{children:"(Experimental) Execute the code blocks and return the result."}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Arguments"}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"code_blocks"})," ",(0,c.jsx)(n.em,{children:"List[CodeBlock]"})," - The code blocks to execute."]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Returns"}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"CommandLineCodeResult"})," - The result of the code execution."]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"restart",children:"restart"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"def restart() -> None\n"})}),"\n",(0,c.jsx)(n.p,{children:"(Experimental) Restart the code executor."}),"\n",(0,c.jsx)(n.h2,{id:"localcommandlinecodeexecutor-1",children:"LocalCommandlineCodeExecutor"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"class LocalCommandlineCodeExecutor(metaclass=_DeprecatedClassMeta)\n"})}),"\n",(0,c.jsx)(n.p,{children:"LocalCommandlineCodeExecutor renamed to LocalCommandLineCodeExecutor"}),"\n",(0,c.jsx)(n.h2,{id:"commandlinecoderesult-1",children:"CommandlineCodeResult"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"class CommandlineCodeResult(metaclass=_DeprecatedClassMeta)\n"})}),"\n",(0,c.jsx)(n.p,{children:"CommandlineCodeResult renamed to CommandLineCodeResult"})]})}function h(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(s,{...e})}):s(e)}},11151:(e,n,o)=>{o.d(n,{Z:()=>a,a:()=>r});var c=o(67294);const t={},d=c.createContext(t);function r(e){const n=c.useContext(d);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),c.createElement(d.Provider,{value:n},e.children)}}}]);